[user]
	signingkey = {{ onepasswordRead "op://Personal/haril ssh key/public key" -}}
{{ if eq .mode "work" }}
	name = {{ onepasswordRead "op://work/Git Config/name" }}
	email = {{ onepasswordRead "op://work/Git Config/email" }}
{{ else if eq .mode "private" }}
	name = {{ onepasswordRead "op://Personal/Git Config/name" }}
	email = {{ onepasswordRead "op://Personal/Git Config/email" }}
{{ end -}}

[core]
	autocrlf = input
	editor = nvim

[alias]
	st = status
	a = "!git add $(git status -s | fzf -m | awk '{print $2}')"
	unstage = reset HEAD --
	bs = "!git switch $(git branch | fzf)"

[init]
	defaultBranch = main

[commit]
	gpgsign = true

[pull]
	rebase = true

[tag]
	gpgSign = true

[diff]
	external = difft

[gpg]
    format = ssh

[gpg "ssh"]
    program = "/Applications/1Password.app/Contents/MacOS/op-ssh-sign"
    allowedSignersFile = {{ .chezmoi.homeDir }}/.config/git/allowed_signers

